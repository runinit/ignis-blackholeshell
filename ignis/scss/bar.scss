// Bar Adaptive Positioning (Phase 2)
// Using Blackhole design tokens for consistent styling

.bar {
    // Base styling
    background: $surface-container;
    border-radius: $radius-m;
    transition: all $animation-normal ease;

    // Top position (default)
    &.position-top {
        &.floating {
            border-radius: $radius-l;
            box-shadow: $shadow-elevation-2;
            backdrop-filter: blur(10px);
            background: rgba($surface-container, 0.95);
        }
        &:not(.floating) {
            border-top-left-radius: 0;
            border-top-right-radius: 0;
        }
    }

    // Bottom position
    &.position-bottom {
        &.floating {
            border-radius: $radius-l;
            box-shadow: $shadow-elevation-2;
            backdrop-filter: blur(10px);
            background: rgba($surface-container, 0.95);
        }
        &:not(.floating) {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }
    }

    // Left position (vertical)
    &.position-left {
        &.floating {
            border-radius: $radius-l;
            box-shadow: $shadow-elevation-2;
            backdrop-filter: blur(10px);
            background: rgba($surface-container, 0.95);
        }
        &:not(.floating) {
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }
    }

    // Right position (vertical)
    &.position-right {
        &.floating {
            border-radius: $radius-l;
            box-shadow: $shadow-elevation-2;
            backdrop-filter: blur(10px);
            background: rgba($surface-container, 0.95);
        }
        &:not(.floating) {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }
    }

    // Corner radius variants
    &.square {
        border-radius: 0;
    }

    // Density variants
    &.density-compact {
        .bar-widget {
            min-height: 32px;
            padding: $spacing-xxs $spacing-s;
        }
    }

    &.density-comfortable {
        .bar-widget {
            min-height: 40px;
            padding: $spacing-xs $spacing-m;
        }
    }

    &.density-spacious {
        .bar-widget {
            min-height: 48px;
            padding: $spacing-s $spacing-l;
        }
    }
}

.bar-widget {
    min-height: $bar_height;
    padding: $bar_padding_v $bar_padding_h;
    margin: $bar_margin_top $bar_margin_sides 0 $bar_margin_sides;
    border-radius: 0;
    transition: 0.3s;

    @if $bar_background_enabled == true {
        background-color: rgba($surface, $bar_transparency);
    } @else {
        background-color: transparent;
    }
}

.clock {
    @include hover($surface);
    color: $onSurface;
    background-color: $surface;
    font-size: 1.5rem;
    border-radius: 1rem;
    padding: 0 0.75rem;
    margin: 0 0.5rem;
    margin-right: 0;
    transition: 0.3s;

    &.active {
        background-color: $primary;
        color: $surface;

        .record-indicator {
            color: $surface;
        }

        @include hover($primary);
    }
}

.kb-layout {
    border-radius: 0.5rem;
    padding: 0 0.25rem;
    margin: 0 0.25rem;
    transition: 0.3s;
    font-size: 1.3rem;
}

.kb-layout:hover {
    background-color: rgba(white, 0.2);
}

.pinned-app {
    margin: 0 0.25rem;
    transition: 0.3s;
    padding: 0 0.1rem;
    border-radius: 0.25rem;
}

.pinned-app:hover {
    background-color: rgba(white, 0.2);
}

.tray {
    padding: 0 0.25rem;
    margin: 0 0.25rem;
}

.workspaces {
    border-radius: 1rem;
    padding: 0.5rem;
    background-color: $surface;
    margin: 0 0.5rem;
    margin-left: 0;
}

.workspace {
    @include hover($primaryContainer);
    border-radius: 1rem;
    margin: 0 0.25rem;
    min-width: 0.7rem;
    min-height: 0.7rem;
    transition: 0.3s;

    &.active {
        @include hover($primary);
        min-width: 2rem;
    }
}

@keyframes recorder-animation {
    0% {
        opacity: 0;
    }

    50% {
        opacity: 1;
    }

    90% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

.record-indicator {
    color: $error;
}

.record-indicator.active {
    animation: recorder-animation 2s infinite;
}

.battery-item {
    margin: 0 0.25rem;
}

.battery-icon {
    color: $onSurface;
    margin-right: 0.3rem;
}

.battery-percent {
    color: $onSurface;
}
